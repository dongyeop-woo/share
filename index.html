<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>TradeNote | 매매일지</title>
    <link rel="stylesheet" href="assets/styles.css">
    <script src="assets/app.js" defer></script>
    <script>
        // 기본 페이지는 대시보드이나, view=journal 파라미터가 있으면 매매일지 페이지를 유지
        (function () {
            const params = new URLSearchParams(window.location.search);
            const stayOnJournal = params.get("view") === "journal";
            if (!stayOnJournal) {
                window.location.replace("dashboard.html");
            }
        })();
    </script>
</head>
<body>
    <header class="site-header">
        <a href="dashboard.html" class="brand" style="text-decoration: none; color: inherit;">
            <span class="brand-mark" aria-hidden="true">📈</span>
            <div>
                <p class="brand-name">TradeNote</p>
                <p class="brand-tagline">쉽고 간단하게</p>
            </div>
        </a>
        <div class="header-actions">
            <button class="theme-toggle" id="theme-toggle" type="button" aria-label="테마 변경" title="다크모드/라이트모드 전환">
                <span class="theme-icon">⚙️</span>
            </button>
        </div>
    </header>

    <!-- 데스크탑 왼쪽 사이드 카테고리 -->
    <nav class="side-nav" aria-label="주요 카테고리">
        <a href="dashboard.html" class="side-nav__item">대시보드</a>
        <a href="index.html?view=journal" class="side-nav__item">매매일지</a>
    </nav>

    <main class="toss-main">
        <div class="toss-dashboard-container">
            <!-- 헤더 (매매내역 관리 + 내정보 아이콘) -->
            <header class="dashboard-header">
                <div class="stock-info-header">
                    <h2 style="margin: 0; font-size: 28px; font-weight: 700; color: #333;">매매내역 관리</h2>
                </div>
                <div class="header-controls">
                    <button type="button" class="profile-btn" id="open-profile-modal-btn" aria-label="내 정보">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10Z" fill="#6B7280"/>
                            <path d="M10 12C5.58172 12 2 14.6863 2 18V20H18V18C18 14.6863 14.4183 12 10 12Z" fill="#6B7280"/>
                        </svg>
                    </button>
                </div>
            </header>

            <section id="trading" class="content-section">

                <div class="trading-grid">
                <!-- 첫 번째 줄: 오늘 매매내역 | 이번 달 매매내역 | 습관 분석 -->
                <div class="trading-section trading-section-today">
                    <div class="trading-section-header">
                        <h3>오늘 매매내역</h3>
                        <button type="button" class="new-btn" data-modal="today-trading-modal">
                            <span>+ 새로 만들기</span>
                        </button>
                    </div>
                    <div class="trading-section-content">
                        <div class="trading-list-scroll" id="today-trading-list"></div>
                        <button type="button" class="more-btn" data-target="today-trading-list" style="display: none;">더보기</button>
                    </div>
                </div>

                <div class="trading-section trading-section-month">
                    <div class="trading-section-header">
                        <h3>이번 달 매매내역</h3>
                        <button type="button" class="new-btn" data-modal="month-trading-modal">
                            <span>+ 새로 만들기</span>
                        </button>
                    </div>
                    <div class="trading-section-content">
                        <div class="trading-list-scroll" id="month-trading-list"></div>
                        <button type="button" class="more-btn" data-target="month-trading-list" style="display: none;">더보기</button>
                    </div>
                </div>

                <div class="trading-section trading-section-habit">
                    <div class="trading-section-header">
                        <h3>습관 분석</h3>
                        <div class="habit-period-selector">
                            <button class="period-dropdown-btn" id="period-dropdown-btn">
                                <span id="period-selected-text">7일</span>
                                <span class="dropdown-arrow">▼</span>
                            </button>
                            <div class="period-dropdown-menu" id="period-dropdown-menu">
                                <div class="period-option" data-period="7">7일</div>
                                <div class="period-option" data-period="30">30일</div>
                                <div class="period-option" data-period="90">90일</div>
                                <div class="period-option" data-period="all">모두</div>
                            </div>
                        </div>
                    </div>
                    <div class="trading-section-content">
                        <div class="habit-analysis-container">
                            <h4 style="margin: 0 0 0.5rem; font-size: 0.9rem; color: var(--positive);">수익을 얻을 때 반복하는 습관</h4>
                            <div id="profit-habit-analysis" class="habit-analysis-content"></div>
                            <h4 style="margin: 1rem 0 0.5rem; font-size: 0.9rem; color: var(--negative);">손실을 할 때 반복되는 습관</h4>
                            <div id="loss-habit-analysis" class="habit-analysis-content"></div>
                        </div>
                    </div>
                </div>

                <!-- 두 번째 줄: 총 수익금 | 총 매매내역 -->
                <div class="trading-section trading-section-profit">
                    <div class="trading-section-header">
                        <h3>총 수익금</h3>
                    </div>
                    <div class="trading-section-content">
                        <div class="profit-charts-grid">
                            <!-- 한 줄: 오늘, 이번 달, 전체 -->
                            <div class="profit-charts-row">
                                <!-- 오늘 총 수익금 그래프 -->
                                <div class="profit-chart-wrapper">
                                    <div class="profit-chart" id="profit-chart-today">
                                        <svg class="profit-pie-chart" viewBox="0 0 200 200">
                                            <circle class="profit-pie-bg" cx="100" cy="100" r="50" fill="none" stroke="#e0e0e0" stroke-width="15"></circle>
                                            <g id="profit-pie-slices-today"></g>
                                        </svg>
                                        <div class="profit-chart-center">
                                            <div class="profit-center-item">
                                                <span class="profit-center-label">오늘</span>
                                                <span class="profit-center-value" id="today-total-profit">0원</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="profit-legend-container">
                                        <button type="button" class="more-detail-btn" id="profit-detail-btn-today" style="display: none;">
                                            <span>더보기</span>
                                        </button>
                                        <div class="profit-legend" id="profit-legend-today"></div>
                                    </div>
                                </div>
                                
                                <!-- 이번 달 총 수익금 그래프 -->
                                <div class="profit-chart-wrapper">
                                    <div class="profit-chart" id="profit-chart-month">
                                        <svg class="profit-pie-chart" viewBox="0 0 200 200">
                                            <circle class="profit-pie-bg" cx="100" cy="100" r="50" fill="none" stroke="#e0e0e0" stroke-width="15"></circle>
                                            <g id="profit-pie-slices-month"></g>
                                        </svg>
                                        <div class="profit-chart-center">
                                            <div class="profit-center-item">
                                                <span class="profit-center-label">이번 달</span>
                                                <span class="profit-center-value" id="month-total-profit">0원</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="profit-legend-container">
                                        <button type="button" class="more-detail-btn" id="profit-detail-btn-month" style="display: none;">
                                            <span>더보기</span>
                                        </button>
                                        <div class="profit-legend" id="profit-legend-month"></div>
                                    </div>
                                </div>
                                
                                <!-- 전체 총 수익금 그래프 -->
                                <div class="profit-chart-wrapper">
                                    <div class="profit-chart" id="profit-chart-all">
                                        <svg class="profit-pie-chart" viewBox="0 0 200 200">
                                            <circle class="profit-pie-bg" cx="100" cy="100" r="50" fill="none" stroke="#e0e0e0" stroke-width="15"></circle>
                                            <g id="profit-pie-slices-all"></g>
                                        </svg>
                                        <div class="profit-chart-center">
                                            <div class="profit-center-item">
                                                <span class="profit-center-label">전체</span>
                                                <span class="profit-center-value" id="all-total-profit">0원</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="profit-legend-container">
                                        <button type="button" class="more-detail-btn" id="profit-detail-btn-all" style="display: none;">
                                            <span>더보기</span>
                                        </button>
                                        <div class="profit-legend" id="profit-legend-all"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="trading-section trading-section-all">
                    <div class="trading-section-header">
                        <h3>총 매매내역</h3>
                    </div>
                    <div class="trading-section-content">
                        <div class="trading-list-scroll" id="all-trading-list"></div>
                        <button type="button" class="more-btn" data-target="all-trading-list" style="display: none;">더보기</button>
                    </div>
                </div>

                <div class="trading-section trading-section-calendar">
                    <div class="trading-section-header">
                        <h3>캘린더</h3>
                    </div>
                    <div class="trading-section-content">
                        <div class="calendar-container" id="trading-calendar-container">
                            <div class="calendar-header">
                                <button type="button" class="calendar-nav-btn" id="trading-prev-month">‹</button>
                                <h3 id="trading-calendar-month-year"></h3>
                                <button type="button" class="calendar-nav-btn" id="trading-next-month">›</button>
                            </div>
                            <div class="calendar-weekdays">
                                <div class="calendar-weekday">일</div>
                                <div class="calendar-weekday">월</div>
                                <div class="calendar-weekday">화</div>
                                <div class="calendar-weekday">수</div>
                                <div class="calendar-weekday">목</div>
                                <div class="calendar-weekday">금</div>
                                <div class="calendar-weekday">토</div>
                            </div>
                            <div class="calendar-days" id="trading-calendar-days"></div>
                        </div>
                    </div>
                </div>
                </div>
            </section>
            
            <!-- 종목별 수익금 상세 모달 -->
            <div class="side-modal-overlay" id="profit-detail-modal">
                <div class="side-modal">
                    <div class="side-modal-header">
                        <h3 id="profit-detail-title">종목별 수익금</h3>
                        <button type="button" class="side-modal-close" id="close-profit-detail-modal">&times;</button>
                    </div>
                    <div class="side-modal-body">
                        <div id="profit-detail-list" class="profit-detail-list"></div>
                    </div>
                </div>
            </div>
            
            <!-- 캘린더 날짜 상세 모달 -->
            <div class="side-modal-overlay" id="trading-calendar-detail-modal">
                <div class="side-modal">
                    <div class="side-modal-header">
                        <h3 id="trading-calendar-detail-date"></h3>
                        <button type="button" class="side-modal-close" id="close-trading-calendar-detail">&times;</button>
                    </div>
                    <div class="side-modal-body" id="trading-calendar-detail-content">
                        <!-- 상세 정보가 여기에 표시됩니다 -->
                    </div>
                </div>
            </div>
            
            <!-- 매매내역 상세 모달 -->
            <div class="side-modal-overlay" id="trading-detail-modal">
                <div class="side-modal">
                    <div class="side-modal-header">
                        <h3>매매내역 상세</h3>
                        <button type="button" class="side-modal-close" id="close-trading-detail-modal">&times;</button>
                    </div>
                    <div class="side-modal-body" id="trading-detail-content">
                        <!-- 상세 정보가 여기에 표시됩니다 -->
                    </div>
                </div>
            </div>
            <!-- 매매내역 수정 모달 -->
            <div class="side-modal-overlay" id="edit-trading-modal">
                <div class="side-modal">
                    <div class="side-modal-header">
                        <h3>매매내역 수정</h3>
                        <button type="button" class="side-modal-close" id="close-edit-trading-modal">&times;</button>
                    </div>
                    <div class="side-modal-body">
                        <form class="trading-form" id="edit-trading-form">
                            <div class="form-row">
                                <div class="form-field">
                                    <label for="edit-date">날짜</label>
                                    <input type="date" id="edit-date" required>
                                </div>
                                <div class="form-field">
                                    <label for="edit-stock">종목명</label>
                                    <input type="text" id="edit-stock" placeholder="예: AAPL" required>
                                </div>
                                <div class="form-field">
                                    <label for="edit-position">포지션</label>
                                    <select id="edit-position" required>
                                        <option value="long">롱</option>
                                        <option value="short">숏</option>
                                        <option value="swing">스윙</option>
                                        <option value="scalping">스캘핑</option>
                                        <option value="day">데이트레이딩</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="edit-result">승무패</label>
                                    <select id="edit-result">
                                        <option value="">선택 안함</option>
                                        <option value="win">승</option>
                                        <option value="draw">무</option>
                                        <option value="loss">패</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="edit-profit">수익금 (원)</label>
                                    <input type="text" id="edit-profit" inputmode="numeric" placeholder="0" required>
                                </div>
                                <div class="form-field form-field-full">
                                    <label for="edit-chart">차트 이미지</label>
                                    <div class="image-upload-container">
                                        <input type="file" id="edit-chart" accept="image/*" class="image-upload-input">
                                        <label for="edit-chart" class="image-upload-label">
                                            <span class="upload-text">이미지 선택</span>
                                        </label>
                                        <div class="image-preview" id="edit-chart-preview"></div>
                                        <button type="button" class="image-remove-btn" id="edit-chart-remove" style="display: none;">삭제</button>
                                    </div>
                                </div>
                                <div class="form-field form-field-full">
                                    <label for="edit-profit-reason">익절한 이유 <span style="color: var(--text-muted); font-size: 0.85rem;">(익절 또는 손절 사유 중 하나 필수)</span></label>
                                    <textarea id="edit-profit-reason" placeholder="익절한 이유를 입력하세요" rows="3"></textarea>
                                </div>
                                <div class="form-field form-field-full">
                                    <label for="edit-loss-reason">손절한 이유 <span style="color: var(--text-muted); font-size: 0.85rem;">(익절 또는 손절 사유 중 하나 필수)</span></label>
                                    <textarea id="edit-loss-reason" placeholder="손절한 이유를 입력하세요" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="cta-button">수정</button>
                                <button type="button" class="cancel-btn" id="cancel-edit-trading">취소</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- 로그인 필요 오버레이 -->
            <div class="login-block-overlay" id="login-overlay" aria-hidden="true">
                <div class="login-block-content" role="dialog" aria-labelledby="login-block-title" aria-describedby="login-block-desc">
                    <h3 id="login-block-title">로그인이 필요합니다</h3>
                    <p id="login-block-desc">매매일지를 작성하고 보려면 로그인해주세요.</p>
                    <a href="login.html" class="login-block-button" aria-label="로그인 페이지로 이동">로그인</a>
                </div>
            </div>
        </div>
    </main>

    <!-- 모바일 하단 바 카테고리 -->
    <nav class="bottom-nav" aria-label="하단 카테고리">
        <a href="index.html?view=journal" class="bottom-nav__item">매매일지</a>
    </nav>
    <!-- 사이드 패널 모달 -->
    <div class="side-modal-overlay" id="modal-overlay"></div>
    
    <!-- 오늘 매매내역 모달 -->
    <div class="side-modal" id="today-trading-modal">
        <div class="side-modal-header">
            <h2>새 매매내역 추가</h2>
            <button type="button" class="side-modal-close" data-modal="today-trading-modal">×</button>
        </div>
        <div class="side-modal-body">
            <form class="trading-form" id="today-trading-form">
                <div class="form-row">
                    <div class="form-field">
                        <label for="today-date">날짜</label>
                        <input type="date" id="today-date" required>
                    </div>
                    <div class="form-field">
                        <label for="today-stock">종목명</label>
                        <input type="text" id="today-stock" placeholder="예: AAPL" required>
                    </div>
                    <div class="form-field">
                        <label for="today-position">포지션</label>
                        <select id="today-position" required>
                            <option value="long">롱</option>
                            <option value="short">숏</option>
                            <option value="swing">스윙</option>
                            <option value="scalping">스캘핑</option>
                            <option value="day">데이트레이딩</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="today-result">승무패</label>
                        <select id="today-result">
                            <option value="">선택 안함</option>
                            <option value="win">승</option>
                            <option value="draw">무</option>
                            <option value="loss">패</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="today-profit">수익금 (원)</label>
                        <input type="text" id="today-profit" inputmode="numeric" placeholder="0" required>
                    </div>
                    <div class="form-field form-field-full">
                        <label for="today-chart">차트 이미지</label>
                        <div class="image-upload-container">
                            <input type="file" id="today-chart" accept="image/*" class="image-upload-input">
                            <label for="today-chart" class="image-upload-label">
                                <span class="upload-text">이미지 선택</span>
                            </label>
                            <div class="image-preview" id="today-chart-preview"></div>
                            <button type="button" class="image-remove-btn" id="today-chart-remove" style="display: none;">삭제</button>
                        </div>
                    </div>
                    <div class="form-field form-field-full">
                        <label for="today-profit-reason">익절한 이유 <span style="color: var(--text-muted); font-size: 0.85rem;">(익절 또는 손절 사유 중 하나 필수)</span></label>
                        <textarea id="today-profit-reason" placeholder="익절한 이유를 입력하세요" rows="3"></textarea>
                    </div>
                    <div class="form-field form-field-full">
                        <label for="today-loss-reason">손절한 이유 <span style="color: var(--text-muted); font-size: 0.85rem;">(익절 또는 손절 사유 중 하나 필수)</span></label>
                        <textarea id="today-loss-reason" placeholder="손절한 이유를 입력하세요" rows="3"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="cta-button">추가</button>
                    <button type="button" class="cancel-btn" data-modal="today-trading-modal">취소</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 이번 달 매매내역 모달 -->
    <div class="side-modal" id="month-trading-modal">
        <div class="side-modal-header">
            <h2>새 매매내역 추가</h2>
            <button type="button" class="side-modal-close" data-modal="month-trading-modal">×</button>
        </div>
        <div class="side-modal-body">
            <form class="trading-form" id="month-trading-form">
                <div class="form-row">
                    <div class="form-field">
                        <label for="month-date">날짜</label>
                        <input type="date" id="month-date" required>
                    </div>
                    <div class="form-field">
                        <label for="month-stock">종목명</label>
                        <input type="text" id="month-stock" placeholder="예: AAPL" required>
                    </div>
                    <div class="form-field">
                        <label for="month-position">포지션</label>
                        <select id="month-position" required>
                            <option value="long">롱</option>
                            <option value="short">숏</option>
                            <option value="swing">스윙</option>
                            <option value="scalping">스캘핑</option>
                            <option value="day">데이트레이딩</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="month-result">승무패</label>
                        <select id="month-result">
                            <option value="">선택 안함</option>
                            <option value="win">승</option>
                            <option value="draw">무</option>
                            <option value="loss">패</option>
                        </select>
                    </div>
                    <div class="form-field">
                        <label for="month-profit">수익금 (원)</label>
                        <input type="text" id="month-profit" inputmode="numeric" placeholder="0" required>
                    </div>
                    <div class="form-field form-field-full">
                        <label for="month-chart">차트 이미지</label>
                        <div class="image-upload-container">
                            <input type="file" id="month-chart" accept="image/*" class="image-upload-input">
                            <label for="month-chart" class="image-upload-label">
                                <span class="upload-text">이미지 선택</span>
                            </label>
                            <div class="image-preview" id="month-chart-preview"></div>
                            <button type="button" class="image-remove-btn" id="month-chart-remove" style="display: none;">삭제</button>
                        </div>
                    </div>
                    <div class="form-field form-field-full">
                        <label for="month-profit-reason">익절한 이유 <span style="color: var(--text-muted); font-size: 0.85rem;">(익절 또는 손절 사유 중 하나 필수)</span></label>
                        <textarea id="month-profit-reason" placeholder="익절한 이유를 입력하세요" rows="3"></textarea>
                    </div>
                    <div class="form-field form-field-full">
                        <label for="month-loss-reason">손절한 이유 <span style="color: var(--text-muted); font-size: 0.85rem;">(익절 또는 손절 사유 중 하나 필수)</span></label>
                        <textarea id="month-loss-reason" placeholder="손절한 이유를 입력하세요" rows="3"></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="cta-button">추가</button>
                    <button type="button" class="cancel-btn" data-modal="month-trading-modal">취소</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 내 정보 모달 -->
    <div class="side-modal-overlay" id="profile-modal-overlay" style="display: none;">
        <div class="side-modal profile-modal">
            <div class="side-modal-header">
                <h3>내 정보</h3>
                <button type="button" class="side-modal-close" id="profile-modal-close">×</button>
            </div>
            <div class="side-modal-body profile-modal-body">
                <!-- 프로필 헤더 -->
                <div class="profile-header">
                    <div class="profile-avatar-circle">
                        <span class="profile-avatar-initial" id="profile-avatar-initial-modal">-</span>
                    </div>
                    <h3 class="profile-name" id="profile-nickname-modal">-</h3>
                </div>

                <!-- 메뉴 카드 -->
                <div class="profile-menu-card">
                    <h3 class="profile-menu-title">설정</h3>
                    <div class="profile-menu-list">
                        <!-- 로그인 UI (로그인 안 되어 있을 때만 표시) -->
                        <div class="profile-auth-section" id="profile-auth-section-modal">
                            <a class="profile-auth-trigger" id="profile-auth-toggle-modal" href="login.html">로그인</a>
                        </div>
                        <button type="button" class="profile-menu-item" id="btn-edit-profile-modal">
                            <span class="profile-menu-text">회원정보 수정</span>
                            <span class="profile-menu-arrow">›</span>
                        </button>
                        <div class="profile-menu-item profile-menu-item-email">
                            <span class="profile-menu-text">문의하기</span>
                            <a href="mailto:dongyeopwoo1@gmail.com" class="profile-email">dongyeopwoo1@gmail.com</a>
                        </div>
                    </div>
                </div>

                <!-- 로그아웃 및 회원탈퇴 버튼 (로그인되어 있을 때만 표시) -->
                <div class="profile-actions" id="profile-actions-modal" hidden>
                    <button type="button" class="profile-logout-btn" id="profile-auth-logout-modal">로그아웃</button>
                    <button type="button" class="profile-delete-btn" id="profile-delete-account-modal">회원탈퇴</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 회원정보 수정 모달 -->
    <div class="side-modal-overlay" id="edit-profile-modal" style="display: none;">
        <div class="side-modal">
            <div class="side-modal-header">
                <h3>회원정보 수정</h3>
                <button type="button" class="side-modal-close" id="close-edit-profile-modal">×</button>
            </div>
            <div class="side-modal-body">
                <div class="profile-edit-menu">
                    <button type="button" class="profile-edit-item" id="btn-change-password">
                        <span class="profile-edit-text">비밀번호 변경</span>
                        <span class="profile-edit-arrow">›</span>
                    </button>
                    <button type="button" class="profile-edit-item" id="btn-change-nickname">
                        <span class="profile-edit-text">닉네임 변경</span>
                        <span class="profile-edit-arrow">›</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 비밀번호 변경 모달 -->
    <div class="side-modal-overlay" id="change-password-modal" style="display: none;">
        <div class="side-modal">
            <div class="side-modal-header">
                <h3>비밀번호 변경</h3>
                <button type="button" class="side-modal-close" id="close-change-password-modal">×</button>
            </div>
            <div class="side-modal-body">
                <form class="auth-form" id="change-password-form" novalidate>
                    <div class="auth-field">
                        <label for="current-password">현재 비밀번호</label>
                        <input id="current-password" name="currentPassword" type="password" autocomplete="current-password" placeholder="현재 비밀번호를 입력하세요" required>
                    </div>
                    <div class="auth-field">
                        <label for="new-password">새 비밀번호</label>
                        <input id="new-password" name="newPassword" type="password" autocomplete="new-password" placeholder="새 비밀번호를 입력하세요" required minlength="8" maxlength="64">
                    </div>
                    <div class="auth-field">
                        <label for="confirm-password">새 비밀번호 확인</label>
                        <input id="confirm-password" name="confirmPassword" type="password" autocomplete="new-password" placeholder="새 비밀번호를 다시 입력하세요" required minlength="8" maxlength="64">
                    </div>
                    <button class="cta-button full-width" id="change-password-submit" type="submit">비밀번호 변경</button>
                    <p class="auth-message" id="change-password-message" role="status" aria-live="polite"></p>
                </form>
            </div>
        </div>
    </div>

    <!-- 닉네임 변경 모달 -->
    <div class="side-modal-overlay" id="change-nickname-modal" style="display: none;">
        <div class="side-modal">
            <div class="side-modal-header">
                <h3>닉네임 변경</h3>
                <button type="button" class="side-modal-close" id="close-change-nickname-modal">×</button>
            </div>
            <div class="side-modal-body">
                <form class="auth-form" id="change-nickname-form" novalidate>
                    <div class="auth-field">
                        <label for="new-display-name">새 닉네임</label>
                        <input id="new-display-name" name="displayName" type="text" autocomplete="nickname" placeholder="새 닉네임을 입력하세요" required minlength="1" maxlength="60" value="">
                    </div>
                    <button class="cta-button full-width" id="change-nickname-submit" type="submit">닉네임 변경</button>
                    <p class="auth-message" id="change-nickname-message" role="status" aria-live="polite"></p>
                </form>
            </div>
        </div>
    </div>

    <!-- 작성한 글 모달 -->
    <div class="side-modal-overlay" id="my-posts-modal" style="display: none;">
        <div class="side-modal">
            <div class="side-modal-header">
                <h3>내가 쓴 글</h3>
                <button type="button" class="side-modal-close" id="close-my-posts-modal">×</button>
            </div>
            <div class="side-modal-body">
                <div id="my-posts-list" class="trading-list-scroll">
                    <div class="empty-trading-list">작성한 글이 없습니다.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 내가 댓글 단 글 모달 -->
    <div class="side-modal-overlay" id="my-comments-modal" style="display: none;">
        <div class="side-modal">
            <div class="side-modal-header">
                <h3>내가 댓글 단 글</h3>
                <button type="button" class="side-modal-close" id="close-my-comments-modal">×</button>
            </div>
            <div class="side-modal-body">
                <div id="my-comments-list" class="trading-list-scroll">
                    <div class="empty-trading-list">댓글을 단 글이 없습니다.</div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>

